{"version":3,"file":"fade.directive.js","sourceRoot":"","sources":["../../../../../../src/platform/core/common/animations/fade/fade.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Directive, ElementRef, Input, Output, EventEmitter, HostBinding, Renderer2, OnInit, ChangeDetectorRef, AnimationPlayer,\n} from '@angular/core';\nimport { ɵAnimation as Animation, AnimationDriver,\n         ɵAnimationStyleNormalizer as AnimationStyleNormalizer, ɵDomAnimationEngine as DomAnimationEngine } from '@angular/animations/browser';\nimport { animate } from '@angular/animations';\n\n@Directive({\n  selector: '[tdFade]',\n})\nexport class TdFadeDirective {\n\n  private _state: boolean;\n  private _defaultOpacity: string;\n  private _defaultDisplay: string;\n  private _engine: DomAnimationEngine;\n  private _animationPlayer: AnimationPlayer;\n\n  /**\n   * duration?: number\n   * Sets duration of fade animation in miliseconds.\n   * Defaults to 150 ms.\n   */\n  @Input() duration: number = 150;\n\n  /**\n   * tdFade: boolean\n   * Fades element, FadesOut if its 'true', FadesIn if its 'false'.\n   */\n  @Input('tdFade')\n  set state(state: boolean) {\n    this._state = state;\n    if (this._animationPlayer) {\n      this._animationPlayer.destroy();\n      this._animationPlayer = undefined;\n    }\n    if (state) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  /**\n   * fadeIn?: function\n   * Method to be executed when fadeIn animation ends.\n   */\n  @Output('fadeIn') fadeIn: EventEmitter<void> = new EventEmitter<void>();\n\n  /**\n   * fadeOut?: function\n   * Method to be executed when fadeOut animation ends.\n   */\n  @Output('fadeOut') fadeOut: EventEmitter<void> = new EventEmitter<void>();\n\n  /**\n   * Binds native 'aria-expanded' attribute.\n   */\n  @HostBinding('attr.aria-expanded')\n  get ariaExpandedBinding(): boolean {\n    return !this._state;\n  }\n\n  /**\n   * Binds native 'aria-hidden' attribute.\n   */\n  @HostBinding('attr.aria-hidden')\n  get ariaHiddenBinding(): boolean {\n    return this._state;\n  }\n\n  constructor(private _renderer: Renderer2,\n              private _element: ElementRef,\n              private _changeDetectorRef: ChangeDetectorRef,\n              animationDriver: AnimationDriver,\n              animationStyleNormalizer: AnimationStyleNormalizer) {\n    this._engine = new DomAnimationEngine(animationDriver, animationStyleNormalizer);\n  }\n\n  /**\n   * Hides element: starts animation and adds \"display:'none'\" style at the end.\n   */\n  hide(): void {\n    this._defaultDisplay = this._element.nativeElement.style.display;\n    this._defaultOpacity = !this._element.nativeElement.style.opacity ? 1 : this._element.nativeElement.style.opacity;\n    this._animationPlayer = this._engine.animateTimeline(\n        this._element.nativeElement,\n        new Animation([animate(this.duration + 'ms ease-out')],\n      ).buildTimelines([{opacity: this._defaultOpacity}], [{opacity: 0}]));\n    this._changeDetectorRef.markForCheck();\n    this._animationPlayer.play();\n    this._animationPlayer.onDone(() => {\n      this._animationPlayer.destroy();\n      this._renderer.setStyle(this._element.nativeElement, 'display', 'none');\n      this._changeDetectorRef.markForCheck();\n    });\n  }\n\n  /**\n   * Shows element: sets \"display:[default]\" so animation is shown.\n   */\n  show(): void {\n    this._renderer.setStyle(this._element.nativeElement, 'display', this._defaultDisplay);\n    this._changeDetectorRef.markForCheck();\n    this._animationPlayer = this._engine.animateTimeline(\n        this._element.nativeElement,\n        new Animation([animate(this.duration + 'ms ease-in')],\n      ).buildTimelines([{opacity: 0}], [{opacity: this._defaultOpacity}]));\n    this._animationPlayer.play();\n    this._animationPlayer.onDone(() => {\n      this._animationPlayer.destroy();\n      this._changeDetectorRef.markForCheck();\n    });\n  }\n}\n"]}